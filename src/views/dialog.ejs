<% /* /dialog: 決済済みユーザーのゲート内ページ。express-ejs-layoutsでlayout適用済み。 */ %>

<style>
  .dialog-wrap{ padding:20px 0 14px; }
  .dialog-title{
    font-size:clamp(20px, 5.8vw, 28px); font-weight:900; color:var(--dark-blue);
    margin:0 0 8px;
  }
  .dialog-sub{ color:#4B5563; margin:0 0 16px; font-size:clamp(14px, 3.8vw, 16px); }

  .cta-open{
    display:inline-flex; align-items:center; justify-content:center; gap:10px;
    width:100%; max-width:560px;
    padding:18px 22px; font-size:18px; font-weight:900;
    color:#fff; border:none; border-radius:18px; cursor:pointer; text-decoration:none;
    background:linear-gradient(180deg, #0B2A6B, #0a265f);
    box-shadow:0 18px 36px rgba(11,42,107,.26), 0 10px 22px rgba(2,8,20,.10);
    transition:transform .12s ease, box-shadow .12s ease, filter .12s ease;
  }
  .cta-open:hover{ transform:translateY(-1px); box-shadow:0 22px 44px rgba(11,42,107,.30), 0 12px 26px rgba(2,8,20,.12); }
  .cta-open:active{ transform:translateY(0); box-shadow:inset 0 4px 10px rgba(0,0,0,.16); }
  .cta-open[aria-disabled="true"]{
    cursor:not-allowed; filter:saturate(70%); box-shadow:none; background:linear-gradient(180deg, #94a3b8, #64748b);
  }

  .tip{
    margin-top:14px; font-size:13px; color:#374151; line-height:1.6;
    background:linear-gradient(180deg, var(--white), var(--cream-2));
    border:1px solid rgba(59,64,68,.16); border-radius:16px; padding:14px;
  }
  .tip b{ color:var(--dark-blue); }

  .steps{ margin:12px 0 0; padding-left:18px; }
  .steps li{ margin:6px 0; }

  /* 進捗バー（将来用サンプル。今は非表示にしたい場合は display:none; ） */
  .progress{ height:10px; border-radius:8px; background:rgba(59,64,68,.15); overflow:hidden; border:1px solid rgba(59,64,68,.18); }
  .progress > i{ display:block; height:100%; width:36%; }
  .progress--learning > i{ background:var(--olive); }
</style>

<section class="dialog-wrap">
  <h1 class="dialog-title">作戦会議（AIメンター）</h1>
  <p class="dialog-sub">
    ここから先は、あなた専用のAIメンターと1対1の作戦会議。最終目標までの道筋を、今日の一歩に落とし込みます。
  </p>

  <% const gptUrl = OPENAI_CUSTOM_GPT_URL; %>
  <% if (gptUrl && gptUrl !== '#') { %>
    <a class="cta-open" href="<%= gptUrl %>" target="_blank" rel="noopener noreferrer">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M5 12h9m0 0l-3.5-3.5M14 12l-3.5 3.5" stroke="currentColor" stroke-width="2"/>
        <path d="M12 5h7v14h-7" stroke="currentColor" stroke-width="2"/>
      </svg>
      AIメンターと作戦会議を始める
    </a>
  <% } else { %>
    <button class="cta-open" aria-disabled="true" title="管理者にURL設定を依頼してください">
      AIメンターURLが未設定です
    </button>
    <div class="tip" role="status">
      <b>管理者の方へ：</b> 環境変数 <code>OPENAI_CUSTOM_GPT_URL</code> を設定するとボタンが有効になります。Railwayの「Variables」に追加してください。
    </div>
  <% } %>

  <div class="tip">
    <b>スムーズな始め方：</b>
    <ol class="steps">
      <li>AIが開いたら、いまの目標や興味を書ける範囲で一言入力。</li>
      <li>AIの質問に答えると、あなたの「最終目標→今日の一歩」までが一文で整理されます。</li>
      <li>迷ったら「なぜそれが大事？」とAIに聞き返すと、軸（WHY）がより明確になります。</li>
    </ol>
  </div>

  <!-- 将来：学習達成度バー（サンプル） -->
  <!--
  <div style="margin-top:16px">
    <label style="font-size:13px; color:#374151; display:block; margin-bottom:6px">今週の一歩</label>
    <div class="progress progress--learning"><i style="width:36%"></i></div>
  </div>
  -->
</section>
